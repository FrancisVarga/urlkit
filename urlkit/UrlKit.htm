<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="UrlKit_files/filelist.xml">
<title>UrlKit</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="PersonName"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>trein</o:Author>
  <o:LastAuthor>Joe Berkovitz</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>51</o:TotalTime>
  <o:Created>2006-09-22T15:34:00Z</o:Created>
  <o:LastSaved>2006-09-22T15:34:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>3198</o:Words>
  <o:Characters>18229</o:Characters>
  <o:Company>Macromedia, Inc</o:Company>
  <o:Lines>151</o:Lines>
  <o:Paragraphs>42</o:Paragraphs>
  <o:CharactersWithSpaces>21385</o:CharactersWithSpaces>
  <o:Version>10.2625</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:Calibri;
	mso-font-alt:"Century Gothic";
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1073750139 0 0 159 0;}
@font-face
	{font-family:Cambria;
	mso-font-alt:"Palatino Linotype";
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1073741899 0 0 159 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
h1
	{mso-style-link:" Char";
	mso-style-next:Normal;
	margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:14.0pt;
	font-family:Cambria;
	mso-fareast-font-family:"Times New Roman";
	color:#385B86;
	mso-font-kerning:0pt;}
h2
	{mso-style-name:"Heading 2\, Char Char";
	mso-style-link:" Char Char Char";
	mso-style-next:Normal;
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:13.0pt;
	font-family:Cambria;
	mso-fareast-font-family:"Times New Roman";
	color:#4F81BD;}
h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:115%;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:Arial;}
a:link, span.MsoHyperlink
	{mso-style-noshow:yes;
	color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p.ListParagraph, li.ListParagraph, div.ListParagraph
	{mso-style-name:"List Paragraph";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
p.ListParagraphCxSpFirst, li.ListParagraphCxSpFirst, div.ListParagraphCxSpFirst
	{mso-style-name:"List ParagraphCxSpFirst";
	mso-style-type:export-only;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
p.ListParagraphCxSpMiddle, li.ListParagraphCxSpMiddle, div.ListParagraphCxSpMiddle
	{mso-style-name:"List ParagraphCxSpMiddle";
	mso-style-type:export-only;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
p.ListParagraphCxSpLast, li.ListParagraphCxSpLast, div.ListParagraphCxSpLast
	{mso-style-name:"List ParagraphCxSpLast";
	mso-style-type:export-only;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
span.Char
	{mso-style-name:" Char";
	mso-style-link:"Heading 1";
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:Cambria;
	mso-ascii-font-family:Cambria;
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:Cambria;
	mso-bidi-font-family:"Times New Roman";
	color:#385B86;
	font-weight:bold;}
span.CharCharChar
	{mso-style-name:" Char Char Char";
	mso-style-link:"Heading 2\, Char Char";
	mso-ansi-font-size:13.0pt;
	mso-bidi-font-size:13.0pt;
	font-family:Cambria;
	mso-ascii-font-family:Cambria;
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:Cambria;
	mso-bidi-font-family:"Times New Roman";
	color:#4F81BD;
	font-weight:bold;}
p.Header2, li.Header2, div.Header2
	{mso-style-name:"Header 2";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:-132;
	mso-list-type:simple;
	mso-list-template-ids:-1307535416;}
@list l0:level1
	{mso-level-tab-stop:1.25in;
	mso-level-number-position:left;
	margin-left:1.25in;
	text-indent:-.25in;}
@list l1
	{mso-list-id:-131;
	mso-list-type:simple;
	mso-list-template-ids:-1216424620;}
@list l1:level1
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	margin-left:1.0in;
	text-indent:-.25in;}
@list l2
	{mso-list-id:-130;
	mso-list-type:simple;
	mso-list-template-ids:145252908;}
@list l2:level1
	{mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;}
@list l3
	{mso-list-id:-129;
	mso-list-type:simple;
	mso-list-template-ids:2059985938;}
@list l3:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4
	{mso-list-id:-128;
	mso-list-type:simple;
	mso-list-template-ids:1937561976;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:1.25in;
	mso-level-number-position:left;
	margin-left:1.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l5
	{mso-list-id:-127;
	mso-list-type:simple;
	mso-list-template-ids:-970951088;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	margin-left:1.0in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l6
	{mso-list-id:-126;
	mso-list-type:simple;
	mso-list-template-ids:-904604664;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l7
	{mso-list-id:-125;
	mso-list-type:simple;
	mso-list-template-ids:188501844;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l8
	{mso-list-id:-120;
	mso-list-type:simple;
	mso-list-template-ids:1698441220;}
@list l8:level1
	{mso-level-tab-stop:.25in;
	mso-level-number-position:left;
	margin-left:.25in;
	text-indent:-.25in;}
@list l9
	{mso-list-id:-119;
	mso-list-type:simple;
	mso-list-template-ids:1991142216;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.25in;
	mso-level-number-position:left;
	margin-left:.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l10
	{mso-list-id:421608362;
	mso-list-type:hybrid;
	mso-list-template-ids:1687713552 -1741767688 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l10:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
@list l11
	{mso-list-id:995497629;
	mso-list-type:hybrid;
	mso-list-template-ids:-1945603754 -1741767688 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l11:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
@list l12
	{mso-list-id:1397390908;
	mso-list-type:hybrid;
	mso-list-template-ids:1243613466 -1741767688 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l12:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
@list l13
	{mso-list-id:1827240717;
	mso-list-type:hybrid;
	mso-list-template-ids:-1715942798 -1741767688 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l13:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
@list l14
	{mso-list-id:2013337241;
	mso-list-type:hybrid;
	mso-list-template-ids:-1226900182 720504996 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l14:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:Calibri;
	mso-fareast-font-family:Calibri;
	mso-bidi-font-family:"Times New Roman";}
@list l15
	{mso-list-id:2045791206;
	mso-list-type:hybrid;
	mso-list-template-ids:1250565996 -1026011504 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l15:level1
	{mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Calibri;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<h1>UrlKit</h1>

<h2>The Need for URLs in Rich Internet Applications (RIAs)<o:p></o:p></h2>

<p class=MsoNormal>One of the benefits of an RIA is that the application can
smoothly transition from state to state without having to fetch a new page from
the server and refresh the browser.<span style='mso-spacerun:yes'>  </span>By
avoiding the constant refreshing of pages, the end-user's experience is more
fluid and continuous, and is much the better for it.</p>

<p class=MsoNormal>However one of the advantages of a browser's page-oriented
treatment of the interface refresh is that an application's navigational state
is always clearly coupled to a URL.<span style='mso-spacerun:yes'> 
</span>Thus, when the state of an application changes, the user can reliably:</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l14 level1 lfo5;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Calibri'><span style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>bookmark this URL to get back to that state in
the application</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l14 level1 lfo5;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Calibri'><span style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>email the URL to a friend</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l14 level1 lfo5;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Calibri'><span style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>use the Back and Forward buttons to navigate to
recently visited application states</p>

<p class=MsoNormal>Losing the ability to couple a browser-managed URL to a
specific state of an application is thus a fairly big drawback.</p>

<h2>Why the Current Solution Isn't Enough</h2>

<p class=MsoNormal>The optional Flex Framework browser-history mechanism does
attempt to address this shortcoming.<span style='mso-spacerun:yes'> 
</span>However, its URLs are automatically calculated from the internal state
of various components in the application which are assumed to represent the
application's overall state.<span style='mso-spacerun:yes'>  </span>This has a
number of problems:</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l14 level1 lfo5;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Calibri'><span style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>The application has no control over either the
generation of these URLs (as states change) or the interpretation of previously
generated URLs to which the browser is directed</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l14 level1 lfo5;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Calibri'><span style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>URLs are only coupled to specific UI components
and cannot be mapped to more abstract notions of state</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l14 level1 lfo5;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Calibri'><span style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Generated URLs are opaque strings with no
documented mapping to state.<span style='mso-spacerun:yes'>  </span>Because of
this, they cannot be understood by humans or generated by <span class=GramE>other</span>
programs external to Flex.</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l14 level1 lfo5;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Calibri'><span style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>There is no forward compatibility: URLs generated
by a previous version of the application may not be interpretable by a future
version.</p>

<h2>What UrlKit provides</h2>

<p class=MsoNormal>The UrlKit adds URL-mapping or &quot;bookmarking&quot; capabilities
to Flex-based RIAs.<span style='mso-spacerun:yes'>  </span>While numerous
others have provided solutions to this problem (such as <st1:PersonName>Kevin
 Lynch</st1:PersonName>’s <a
href="http://www.klynch.com/apps/flashlinking/howto.html">article</a>), what’s
different in UrlKit is that it leverages your existing application logic and provides
a way to declaratively code the different URL states. </p>

<p class=MsoNormal>What states of your application are bookmarkable will vary
by application, but <span class=GramE>here’s</span> some possibilities:</p>

<p class=ListParagraphCxSpFirst style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l13 level1 lfo1'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Login page</p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l13 level1 lfo1'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Search results</p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l13 level1 lfo1'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>A product page</p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l13 level1 lfo1'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>A shopping cart</p>

<p class=ListParagraphCxSpLast style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l13 level1 lfo1'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>A drill-down into a data visualization dashboard</p>

<p class=MsoNormal>At the high level, our goal in adding bookmarking capability
to an RIA can be broken down as:</p>

<p class=ListParagraphCxSpFirst style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l15 level1 lfo6;tab-stops:list .75in'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]>Whenever
the application moves into a new state that maps to a new URL, update the
browser location (and generate a new entry in the browser history).</p>

<p class=ListParagraphCxSpLast style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l15 level1 lfo6;tab-stops:list .75in'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]>Whenever
the browser URL is changed (via a user action such as Back, Forward, clicking a
hyperlink, etc.), navigate the application to that state.</p>

<p class=MsoNormal>Part of the challenge here is how to define what constitutes
a new state in the application, and how that state should be <span class=GramE>exported
.</span><span style='mso-spacerun:yes'>  </span>For example, say the user has
clicked on a button in your RIA to display a shopping cart.<span
style='mso-spacerun:yes'>  </span>In an ideal scenario, you shouldn’t have to
write a lot of extra code to tell a framework to update the browser URL (#1).<span
style='mso-spacerun:yes'>  </span>At the same time, however, you need to be
able to get the same URL back and take the applciation to the very same state,
no matter what state it is currently in (#2).</p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>As it turns out,
these requirements are more or less the inverse of each other, and we can
leverage that to create mappings, that we can use in both directions!</p>

<h2>Mapping States to URLs and Back</h2>

<p class=MsoNormal>Building on the shopping cart example, suppose your
application UI is broken up using a ViewStack (with an id of ‘main’).<span
style='mso-spacerun:yes'>  </span>When the user is looking at a product
listing, your ViewStack is pointing to child 0, and when the user is looking at
the shopping cart, they are pointing to child 1.<span
style='mso-spacerun:yes'>  </span>When the user is looking at the product
listing, we want the URL to be “/products” and when the user is looking at the
shopping cart, we want the URL to be “/cart”.<span style='mso-spacerun:yes'> 
</span></p>

<p class=MsoNormal>A simple mapping between “/products” and main.selectedIndex
= 0, and “/cart” and main.selectedIndex = 1, gives us all the information
necessary to achieve our two requirements above.<span
style='mso-spacerun:yes'>  </span>We can watch for the browser URL to change,
and if it changes to “/products” we’ll change main.selectedIndex to 0. <span
style='mso-spacerun:yes'> </span><span class=GramE>Same things for “/cart”.</span><span
style='mso-spacerun:yes'>  </span>We can also watch for main.selectedIndex to
change.<span style='mso-spacerun:yes'>  </span>If it changes to 0, we can
change the browser URL to “/products”.</p>

<p class=MsoNormal>This is where UrlKit’s URL rules come in.<span
style='mso-spacerun:yes'>  </span>UrlKit provides several “rules” that allow
you to declare what your application URLs are, and how they map to your
application logic.<span style='mso-spacerun:yes'>  </span></p>

<p class=MsoNormal>UrlKit uses two-way binding, to go both from a URL to
application logic, and from application logic to a URL.<span
style='mso-spacerun:yes'>  </span>The MXML language doesn’t support two-way
binding, but Flex has a BindingUtils class that can be used for this purpose.</p>

<p class=MsoNormal>UrlKit provides several different rule types.<span
style='mso-spacerun:yes'>  </span>Here’s a brief description of the different
rule types:</p>

<p class=ListParagraphCxSpFirst style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>UrlRuleSet – Defines a mapping between a URL and
a group of rules.</p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>UrlValueRule – Defines a mapping between a URL
and a single value in the application state – usually a property of some object.</p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>UrlDelegateRule – Defines a mapping between a URL
and a dynamically calculated mapping rule.</p>

<p class=ListParagraphCxSpLast style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>UrlNavigatorRule – Defines a mapping between a URL
and the currently selected child of a navigator.</p>

<h2>UrlValueRule and UrlBrowserManager</h2>

<p class=MsoNormal>Probably the most important rule is UrlValueRule.<span
style='mso-spacerun:yes'>  </span>This rule allows you to map a URL fragment to
a property.<span style='mso-spacerun:yes'>  </span>Whenever that property is
set to a specified value, we know that we’ve hit a point in the application
that maps to the specified URL fragment.<span style='mso-spacerun:yes'> 
</span>Similiarily, whenever the browser URL contains the specified URL
fragment, then we know to set the property to the specified value.<span
style='mso-spacerun:yes'>  </span>Here’s an example:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;</span><span class=GramE><span
style='font-size:10.0pt;font-family:"Courier New";color:maroon'>mx:</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:maroon'>Script</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>   
</span>[Bindable]<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>    </span><span
class=GramE>public</span> var used:Boolean;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;/</span><span
style='font-size:10.0pt;font-family:"Courier New";color:maroon'>mx<span
class=GramE>:Script</span></span><span style='font-size:10.0pt;font-family:
"Courier New";color:blue'>&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;</span><span style='font-size:
10.0pt;font-family:"Courier New";color:maroon'>url<span class=GramE>:UrlBrowserManager</span>
applicationState=&quot;{rule}&quot;/&gt;</span><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;</span><span style='font-size:
10.0pt;font-family:"Courier New";color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'>
id=&quot;rule&quot; </span><span style='font-size:10.0pt;font-family:"Courier New";
color:red'>urlFormat</span><span style='font-size:10.0pt;font-family:"Courier New";
color:blue'>=&quot;;used=*&quot;</span><span style='font-size:10.0pt;
font-family:"Courier New";color:fuchsia'> </span><span style='font-size:10.0pt;
font-family:"Courier New";color:red'>sourceValue</span><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>=&quot;used&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>/&gt;<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>(The UrlBrowserManager component takes care of interactions
between the containing browser and the top-level URL rule in your
application.<span style='mso-spacerun:yes'>  </span>A single UrlBrowserManager
component must always be defined somewhere in your application, and its
applicationState property must point to that rule.<span
style='mso-spacerun:yes'>   </span>We'll leave it out of most of the following
examples, for clarity.)</p>

<p class=MsoNormal>Note the use of the wildcard character in urlFormat.<span
style='mso-spacerun:yes'>  </span>That allows you to specify a variable portion
of your URL rule, rather than having to <span class=GramE>specified</span>
multiple rules with redundant information.<span style='mso-spacerun:yes'> 
</span>In this case, we end up with two URLs, “<span class=GramE>;used</span>=t”
and “;used=f”.<span style='mso-spacerun:yes'>  </span>Additionally, it can be
somewhat cumbersome of the end-user to always have different URLs created for
your various application states.<span style='mso-spacerun:yes'> 
</span>Sometimes it’s preferable to have a “default” URL state, such that if
the user navigates to the root URL of your application, it maps to a specific
application state.<span style='mso-spacerun:yes'>  </span>This can be achieved
by using the “defaultValue” attribute, such as:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;</span><span style='font-size:
10.0pt;font-family:"Courier New";color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>urlFormat</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;;used=*&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>sourceValue</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;used&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>defaultValue</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;f&quot;/&gt;<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Now the two URLs are “” and “<span class=GramE>;used</span>=t”.<span
style='mso-spacerun:yes'>  </span>Note that if the user navigates to “<span
class=GramE>;used</span>=f” it will still work.</p>

<p class=MsoNormal>So far we’ve only covered UrlValueRule’s two-way binding
usage.<span style='mso-spacerun:yes'>  </span>For more flexibility, you can use
UrlValueRule’s change event.<span style='mso-spacerun:yes'>  </span>Here’s the
same rule re-written but not using two-way binding:</p>

<p class=MsoNormal><span style='font-size:10.0pt;line-height:115%;font-family:
"Courier New";color:blue'>&lt;</span><span style='font-size:10.0pt;line-height:
115%;font-family:"Courier New";color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='font-size:10.0pt;line-height:115%;font-family:"Courier New";color:fuchsia'>
</span><span style='font-size:10.0pt;line-height:115%;font-family:"Courier New";
color:red'>id</span><span style='font-size:10.0pt;line-height:115%;font-family:
"Courier New";color:blue'>=&quot;rule&quot;</span><span style='font-size:10.0pt;
line-height:115%;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;line-height:115%;font-family:"Courier New";color:red'>urlFormat</span><span
style='font-size:10.0pt;line-height:115%;font-family:"Courier New";color:blue'>=&quot;;used=*&quot;</span><span
style='font-size:10.0pt;line-height:115%;font-family:"Courier New";color:fuchsia'>
</span><span style='font-size:10.0pt;line-height:115%;font-family:"Courier New";
color:red'>booleanValue</span><span style='font-size:10.0pt;line-height:115%;
font-family:"Courier New";color:blue'>=&quot;{used}&quot;</span><span
style='font-size:10.0pt;line-height:115%;font-family:"Courier New";color:fuchsia'>
</span><span style='font-size:10.0pt;line-height:115%;font-family:"Courier New";
color:red'>change</span><span style='font-size:10.0pt;line-height:115%;
font-family:"Courier New";color:blue'>=&quot;used = rule.booleanValue&quot;</span><span
style='font-size:10.0pt;line-height:115%;font-family:"Courier New";color:fuchsia'>
</span><span style='font-size:10.0pt;line-height:115%;font-family:"Courier New";
color:blue'>/&gt;<o:p></o:p></span></p>

<p class=MsoNormal>For most cases, it should be simplier and sufficient to use
the two-way binding syntax.</p>

<p class=MsoNormal>Here's a summary of the key properties of UrlValueRule:</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><b
style='mso-bidi-font-weight:normal'>sourceValue</b></span><b style='mso-bidi-font-weight:
normal'>:</b> supplies a dot-delimited property of the current document which
will be bound to the value of this rule<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><b
style='mso-bidi-font-weight:normal'>stringValue</b></span>: the String value
associated with this rule, if it has matched a URL fragment.<span
style='mso-spacerun:yes'>  </span>Setting this property will cause a new
browser URL to be generated.<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><b
style='mso-bidi-font-weight:normal'>numberValue</b></span><b style='mso-bidi-font-weight:
normal'>: </b>the Number value associated with this rule.<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><b
style='mso-bidi-font-weight:normal'>booleanValue</b></span><b style='mso-bidi-font-weight:
normal'>:</b> the Boolean value associated with this rule.</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><b
style='mso-bidi-font-weight:normal'>defaultValue</b></span><b style='mso-bidi-font-weight:
normal'>: </b><span style='mso-spacerun:yes'> </span>a default String value
that the rule will take on if no matching URL fragment is present.<o:p></o:p></p>

<h2>Escaping special characters</h2>

<p class=MsoNormal>UrlValueRule automatically URL-encodes all special
characters according to standard escaping rules.<span
style='mso-spacerun:yes'>  </span>This means that you don't need to worry,
&quot;what if my application state property contains a special
character&quot;?<span style='mso-spacerun:yes'>  </span>It will be escaped when
the URL is <span class=GramE>generated,</span> and unescaped when that URL is
processed back into an application value.</p>

<p class=MsoNormal>Unicode characters are also covered by this escaping.<o:p></o:p></p>

<h2>UrlNavigatorRule</h2>

<p class=MsoNormal>A specialization of the UrlValueRule is the
UrlNavigatorRule.<span style='mso-spacerun:yes'>  </span>It allows you to map a
URL to a property of the selected child of a navigator.<span
style='mso-spacerun:yes'>  </span>You could achieve the same thing with <span
class=GramE>a</span> UrlValueRule, but UrlNavigatorRule provides a simplier
syntax.<span style='mso-spacerun:yes'>  </span>Here’s an example binding the
label of the selected child in a navigator to a rule:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;</span><span style='font-size:
10.0pt;font-family:"Courier New";color:maroon'>mx<span class=GramE>:TabNavigator</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>id</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;tn&quot;&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>    </span><span
style='color:blue'>&lt;</span><span style='color:maroon'>mx<span class=GramE>:HBox</span></span><span
style='color:fuchsia'> </span><span style='color:red'>label</span><span
style='color:blue'>=&quot;Tab1&quot;</span><span style='color:fuchsia'> </span><span
style='color:blue'>/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>    </span><span
style='color:blue'>&lt;</span><span style='color:maroon'>mx<span class=GramE>:HBox</span></span><span
style='color:fuchsia'> </span><span style='color:red'>label</span><span
style='color:blue'>=&quot;Tab2&quot;</span><span style='color:fuchsia'> </span><span
style='color:blue'>/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;/</span><span
style='font-size:10.0pt;font-family:"Courier New";color:maroon'>mx<span
class=GramE>:TabNavigator</span></span><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;</span><span style='font-size:
10.0pt;font-family:"Courier New";color:maroon'>url<span class=GramE>:UrlNavigatorRule</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>id</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;nr&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>tabNavigator</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;{tn}&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>urlFormat</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;/*&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>/&gt;<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>This rule will give us two urls, “/Tab1” and “/Tab2”.<span
style='mso-spacerun:yes'>  </span>The rule will watch “tn” for a selected child
change, and update the browser URL appropriately.<span
style='mso-spacerun:yes'>  </span>Similarly if the browser URL changes to
“/Tab1” it will set tn.selectedIndex = 0, and if it changes to “/Tab2” it will
set tn.selectedIndex = 1.<span style='mso-spacerun:yes'>  </span>By default
UrlNavigatorRule maps the URL to a selected child’s label property, but you can
override this and use other properties (such as class name or id).</p>

<h2>UrlDelegateRule</h2>

<p class=MsoNormal>Often mapping a navigator selected child to a URL will just
be the root of the URL, and you will want to have each child of the navigator
define their own URL mappings.<span style='mso-spacerun:yes'>  </span>To do
this UrlKit provides a rule that lets you delegate URL mapping functionality to
another rule, using the UrlDelegateRule.<span style='mso-spacerun:yes'> 
</span>This rule simply points to another rule.<span style='mso-spacerun:yes'> 
</span>Using data binding, you can update what rule it delegates to.<span
style='mso-spacerun:yes'>  </span>Building on the UrlNavigatorRule example,
here’s how after matching on “/Tab1” or “/Tab2” we can delegate the rest of the
URL mappings to the selected child of the navigator:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;url<span class=GramE>:UrlRuleSet</span>
id=&quot;rule&quot;&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'><span style='mso-spacerun:yes'> 
</span>&lt;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:maroon'>url<span class=GramE>:UrlNavigatorRule</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>id</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;nr&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>tabNavigator</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;{tn}&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>urlFormat</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;/*&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>/&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'><span style='mso-spacerun:yes'> 
</span>&lt;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:maroon'>url<span class=GramE>:UrlDelegateRule</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>rule</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;{nr.navigatorChildRule}&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>/&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;/url<span class=GramE>:UrlRuleSet</span>&gt;<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>(Notice that now we've got <u>two</u> rules, inside <span
class=GramE>a</span> UrlRuleSet.<span style='mso-spacerun:yes'>  </span>A rule
set parses <span class=GramE>its</span> URL into pieces, with each child rule
consuming (or generating) the appropriate piece of the URL.<span
style='mso-spacerun:yes'>  </span>This is a very powerful technique that we'll
be using a lot.<span style='mso-spacerun:yes'>  </span><span class=GramE>More
on this in a moment.)</span></p>

<p class=MsoNormal><span class=GramE>navigatorChildRule</span> is a special,
bindable, property on UrlNavigatorRule, that returns a child’s URL rules.<span
style='mso-spacerun:yes'>  </span>It updates whenever the selected child of the
navigator changes.<span style='mso-spacerun:yes'>  </span>Note that you can
specify the id of the child rules in the selected child, but by default
UrlNavigatorRule assumes that each selected child will have <span class=GramE>a</span>
“urls” property that is a URL rule object.<span style='mso-spacerun:yes'> 
</span>Also note that you can use UrlDelegateRule with any expression not just
UrlNavigatoRule.navigatorChildRule.<span style='mso-spacerun:yes'>  </span>For
example, suppose you wanted to delegate to a different rule depending on the
currentState of a UI component, you could use the following:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;url<span class=GramE>:UrlRuleSet</span>
id=&quot;rule&quot;&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'><span style='mso-spacerun:yes'> 
</span>&lt;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:maroon'>url<span class=GramE>:UrlNavigatorRule</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>id</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;nr&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>tabNavigator</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;{tn}&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>urlFormat</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;/*&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>/&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'><span
style='mso-spacerun:yes'> </span><span style='mso-spacerun:yes'> </span>&lt;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:maroon'>url<span
class=GramE>:UrlDelegateRule</span></span><span style='font-size:10.0pt;
font-family:"Courier New";color:fuchsia'> </span><span style='font-size:10.0pt;
font-family:"Courier New";color:red'>rule</span><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>=&quot;{currentState == 'sideA' ?
sideARule : sideBRule}&quot;</span><span style='font-size:10.0pt;font-family:
"Courier New";color:fuchsia'> </span><span style='font-size:10.0pt;font-family:
"Courier New";color:blue'>/&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;/url<span class=GramE>:UrlRuleSet</span>&gt;<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h2>UrlRuleSet</h2>

<p class=MsoNormal>So far we’ve only covered mapping a URL to a single
property.<span style='mso-spacerun:yes'>  </span>For most (or all) applications
this is not sufficient.<span style='mso-spacerun:yes'>  </span>To solve this, UrlKit
provides a way to group several URL rules together using the UrlRuleSet rule.<span
style='mso-spacerun:yes'>  </span>Before jumping into UrlRuleSet’s, we need to
clarify UrlValueRule a bit.<span style='mso-spacerun:yes'>  </span>It’s clear
that UrlValueRule allows us to define a mapping between a URL and a
property.<span style='mso-spacerun:yes'>  </span>However, what happens if the
browser URL is set to a URL different than what is specified in the rule?<span
style='mso-spacerun:yes'>  </span>Also, what happens if a property is set to a
different value than what is specified in the rule?<span
style='mso-spacerun:yes'>  </span>The answer is that the UrlValueRule isn’t
matched, and if coming from the browser direction, then the specified property
is not changed, and if coming from the property direction, the browser URL
isn’t changed.<span style='mso-spacerun:yes'>  </span>This has important
implications for UrlRuleSet.<span style='mso-spacerun:yes'>  </span>UrlRuleSet
can composite the child rule mappings in three ways:</p>

<p class=ListParagraphCxSpFirst style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span class=GramE>all</span> – When matching a
browser URL, all of the child URLs must match the current URL, else none of
them do.<span style='mso-spacerun:yes'>  </span>When a watched property
changes, and all the children match the current URL, the rule set’s URL will be
a composite of all URLs. </p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span class=GramE>any</span> – Any of the child URLs
may match the current URL. When a watched property changes, the rule set’s URL
will be a composite of the match child URLs.</p>

<p class=ListParagraphCxSpLast style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span class=GramE>one</span> – Only the first
child rule that matches the current URL is used.</p>

<p class=MsoNormal>The default is “all”.<span style='mso-spacerun:yes'> 
</span><span class=GramE>Here’s</span> a couple of examples:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span class=GramE><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>&lt;!--</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'> sample URL:
/Electronics/1234 --&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New";
color:blue'>&lt;</span><span class=GramE><span style='font-size:10.0pt;
font-family:"Courier New";color:maroon'>url:</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:maroon'>UrlRuleSet</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New"'><span
style='mso-spacerun:yes'>    </span><span style='color:blue'>&lt;</span><span
style='color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='color:fuchsia'> </span><span style='color:red'>urlFormat</span><span
style='color:blue'>=&quot;/*&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>sourceValue</span><span style='color:blue'>=&quot;productCategory&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New"'><span
style='mso-spacerun:yes'>    </span><span style='color:blue'>&lt;</span><span
style='color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='color:fuchsia'> </span><span style='color:red'>urlFormat</span><span
style='color:blue'>=&quot;/*&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>sourceValue</span><span style='color:blue'>=&quot;productId&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New";
color:blue'>&lt;/</span><span style='font-size:10.0pt;font-family:"Courier New";
color:maroon'>url<span class=GramE>:UrlRuleSet</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span class=GramE><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>&lt;!--</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'> sample URL: ;lowPrice=50;used=t
--&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New";
color:blue'>&lt;</span><span class=GramE><span style='font-size:10.0pt;
font-family:"Courier New";color:maroon'>url:</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:maroon'>UrlRuleSet</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New"'><span
style='mso-spacerun:yes'>    </span><span style='color:blue'>&lt;</span><span
style='color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='color:fuchsia'> </span><span style='color:red'>urlFormat</span><span
style='color:blue'>=&quot;;lowPrice=*&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>sourceValue</span><span style='color:blue'>=&quot;lowPrice&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>defaultValue</span><span
style='color:blue'>=&quot;10&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New"'><span
style='mso-spacerun:yes'>    </span><span style='color:blue'>&lt;</span><span
style='color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='color:fuchsia'> </span><span style='color:red'>urlFormat</span><span
style='color:blue'>=&quot;;highPrice=*&quot;</span><span style='color:fuchsia'>
</span><span style='color:red'>sourceValue</span><span style='color:blue'>=&quot;highPrice&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>defaultValue</span><span
style='color:blue'>=&quot;100&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New"'><span
style='mso-spacerun:yes'>    </span><span style='color:blue'>&lt;</span><span
style='color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='color:fuchsia'> </span><span style='color:red'>urlFormat</span><span
style='color:blue'>=&quot;;searchText=*&quot;</span><span style='color:fuchsia'>
</span><span style='color:red'>sourceValue</span><span style='color:blue'>=&quot;searchText&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>defaultValue</span><span
style='color:blue'>=&quot;&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New"'><span
style='mso-spacerun:yes'>    </span><span style='color:blue'>&lt;</span><span
style='color:maroon'>url<span class=GramE>:UrlValueRule</span></span><span
style='color:fuchsia'> </span><span style='color:red'>urlFormat</span><span
style='color:blue'>=&quot;;used=*&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>sourceValue</span><span style='color:blue'>=&quot;used&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>defaultValue</span><span
style='color:blue'>=&quot;f&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-1.0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;line-height:normal;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt;font-family:"Courier New";
color:blue'>&lt;/</span><span style='font-size:10.0pt;font-family:"Courier New";
color:maroon'>url<span class=GramE>:UrlRuleSet</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>&gt;<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>In these examples, we’ve defined a group of rules, that all
must be matched.<span style='mso-spacerun:yes'>  </span>Since some of the child
rules have default <span class=GramE>value’s</span>, an empty string is a match
for them.<span style='mso-spacerun:yes'>  </span>Here are some URLs that would
match this rule:</p>

<p class=ListParagraphCxSpFirst style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>“;lowPrice=11”</p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>“;highPrice=11;used=t”</p>

<p class=ListParagraphCxSpLast style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l12 level1 lfo2'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>“” – empty URL (because all rules have
defaultValues)</p>

<h2><span class=GramE>urlPattern</span> vs. urlFormat</h2>

<p class=MsoNormal>So far we’ve only been using the urlFormat property.<span
style='mso-spacerun:yes'>  </span>It’s been playing a double <span class=GramE>role,</span>
it’s used for stating what URL to match on when matching a URL from the
browser, and what URL to create when a watched property has been changed.<span
style='mso-spacerun:yes'>  </span>UrlKit rule’s have another property, called
urlPattern.<span style='mso-spacerun:yes'>  </span><span class=GramE>urlPattern</span>
is used for specifying what URL to match on when the browser URL changes.<span
style='mso-spacerun:yes'>  </span>Typically this is the same URL as what URL to
create when a watched property changes, so by default urlFormat will be used
for both.<span style='mso-spacerun:yes'>  </span>However there are times when
it’s desirable to specify both.<span style='mso-spacerun:yes'>  </span>For
example:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;</span><span style='font-size:
10.0pt;font-family:"Courier New";color:maroon'>url<span class=GramE>:UrlRuleSet</span></span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>id</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;urls&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:fuchsia'> </span><span
style='font-size:10.0pt;font-family:"Courier New";color:red'>type</span><span
style='font-size:10.0pt;font-family:"Courier New";color:blue'>=&quot;one&quot;&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>    </span><span
style='color:blue'>&lt;</span><span style='color:maroon'>url<span class=GramE>:UrlRuleSet</span></span><span
style='color:fuchsia'><span style='mso-spacerun:yes'>  </span></span><span
style='color:red'>id</span><span style='color:blue'>=&quot;sideARule&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>urlPattern</span><span
style='color:blue'>=&quot;/sideA.*&quot;&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>       
</span><span style='color:blue'>&lt;</span><span style='color:maroon'>url<span
class=GramE>:UrlValueRule</span></span><span style='color:fuchsia'> </span><span
style='color:red'>urlFormat</span><span style='color:blue'>=&quot;/*&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>sourceValue</span><span
style='color:blue'>=&quot;currentState&quot;</span><span style='color:fuchsia'>
</span><span style='color:blue'>/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>       
</span><span style='color:blue'>&lt;</span><span style='color:maroon'>url<span
class=GramE>:UrlValueRule</span></span><span style='color:fuchsia'> </span><span
style='color:red'>urlFormat</span><span style='color:blue'>=&quot;;lowPrice=*&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>sourceValue</span><span
style='color:blue'>=&quot;lowPrice&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>defaultValue</span><span style='color:blue'>=&quot;10&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>       
</span><span style='color:blue'>&lt;</span><span style='color:maroon'>url<span
class=GramE>:UrlValueRule</span></span><span style='color:fuchsia'> </span><span
style='color:red'>urlFormat</span><span style='color:blue'>=&quot;;highPrice=*&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>sourceValue</span><span
style='color:blue'>=&quot;highPrice&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>defaultValue</span><span style='color:blue'>=&quot;100&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>       
</span><span style='color:blue'>&lt;</span><span style='color:maroon'>url<span
class=GramE>:UrlValueRule</span></span><span style='color:fuchsia'> </span><span
style='color:red'>urlFormat</span><span style='color:blue'>=&quot;;searchText=*&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>sourceValue</span><span
style='color:blue'>=&quot;searchText&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>defaultValue</span><span style='color:blue'>=&quot;&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>       
</span><span style='color:blue'>&lt;</span><span style='color:maroon'>url<span
class=GramE>:UrlValueRule</span></span><span style='color:fuchsia'> </span><span
style='color:red'>urlFormat</span><span style='color:blue'>=&quot;;used=*&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>sourceValue</span><span
style='color:blue'>=&quot;used&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>defaultValue</span><span style='color:blue'>=&quot;f&quot;/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>    </span><span
style='color:blue'>&lt;/</span><span style='color:maroon'>url<span class=GramE>:UrlRuleSet</span></span><span
style='color:blue'>&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>    </span><span
style='color:blue'>&lt;</span><span style='color:maroon'>url<span class=GramE>:UrlRuleSet</span></span><span
style='color:fuchsia'> </span><span style='color:red'>id</span><span
style='color:blue'>=&quot;sideBRule&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>urlPattern</span><span style='color:blue'>=&quot;/sideB/.*&quot;&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>       
</span><span style='color:blue'>&lt;</span><span style='color:maroon'>url<span
class=GramE>:UrlValueRule</span></span><span style='color:fuchsia'> </span><span
style='color:red'>urlFormat</span><span style='color:blue'>=&quot;/*&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>sourceValue</span><span
style='color:blue'>=&quot;currentState&quot;</span><span style='color:fuchsia'>
</span><span style='color:blue'>/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>       
</span><span style='color:blue'>&lt;</span><span style='color:maroon'>url<span
class=GramE>:UrlNavigatorRule</span></span><span style='color:fuchsia'> </span><span
style='color:red'>urlFormat</span><span style='color:blue'>=&quot;/*&quot;</span><span
style='color:fuchsia'> </span><span style='color:red'>accordion</span><span
style='color:blue'>=&quot;{stepAcc}&quot;</span><span style='color:fuchsia'> </span><span
style='color:red'>urlField</span><span style='color:blue'>=&quot;id&quot;</span><span
style='color:fuchsia'> </span><span style='color:blue'>/&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New"'><span style='mso-spacerun:yes'>    </span><span
style='color:blue'>&lt;/</span><span style='color:maroon'>url<span class=GramE>:UrlRuleSet</span></span><span
style='color:blue'>&gt;<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>&lt;/</span><span
style='font-size:10.0pt;font-family:"Courier New";color:maroon'>url<span
class=GramE>:UrlRuleSet</span></span><span style='font-size:10.0pt;font-family:
"Courier New";color:blue'>&gt;</span><span style='font-size:10.0pt;font-family:
"Courier New"'><span style='mso-spacerun:yes'>    </span><o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>In this example, urlPattern is used to disambiguate to child
UrlRuleSet’s.<span style='mso-spacerun:yes'>  </span><span class=GramE>UrlRuleSet’s
do not need (or use) urlFormat, because their URLs are created from their child
urls.</span><span style='mso-spacerun:yes'>  </span>Yet in this example, we
want only one of the UrlRuleSet’s to match based on the URL.<span
style='mso-spacerun:yes'>  </span>If a URL is “/sideA” we want the first
sideARule to match.<span style='mso-spacerun:yes'>  </span>If a URL is “/sideB”
we want the sideBRule to match.</p>

<p class=MsoNormal>When you do not specify <span class=GramE>a</span>
urlPattern, it is calculated from the urlFormat, substituting the regexp:</p>

<p class=MsoNormal style='text-indent:.5in'><span class=GramE>/(</span>[a-zA-Z0-9%+]*)/</p>

<p class=MsoNormal><span class=GramE>for</span> the string &quot;*&quot; if it
occurs in the urlFormat.<span style='mso-spacerun:yes'>  </span>This regexp
purposely does not match URL metacharacters and delimiters.<span
style='mso-spacerun:yes'>  </span>Thus, the &quot;*&quot; wildcard can never
match a string that does contain those characters (and you wouldn't want it to,
since you're probably using those characters as delimiters).<o:p></o:p></p>

<h2><span class=GramE>urlPattern</span> and UrlValueRules</h2>

<p class=MsoNormal>For <span class=GramE>a</span> UrlValueRule, urlPattern also
determines how it parses a URL fragment into its value.<span
style='mso-spacerun:yes'>  </span>If provided, the rule will not process a URL
unless the pattern matches it; the pattern must define a single regexp group
with (), which will extract the value portion of the URL fragment.</p>

<h2>Putting it all together</h2>

<p class=MsoNormal>UrlKit comes with a few samples.<span
style='mso-spacerun:yes'>  </span>It shows how you can bind URLs to navigators,
Flex’s state feature, and various application properties.<span
style='mso-spacerun:yes'>  </span>Here’s a summary of the examples:</p>

<p class=ListParagraphCxSpFirst style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l10 level1 lfo4'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Bookmarks.mxml – This is the main application
file.<span style='mso-spacerun:yes'>  </span>It shows how to create a root
rule, and hook it up to the browser.<span style='mso-spacerun:yes'>  </span>It
contains a navigator rule that branches out to the examples.<span
style='mso-spacerun:yes'>  </span>Each example gets <span class=GramE>it’s</span>
own URL, and then they add to the URL from there.</p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l10 level1 lfo4'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>StatesExample.mxml – Shows how you can bind
rules to <span class=GramE>Flex’s</span> state feature.<span
style='mso-spacerun:yes'>  </span>It builds on the AS doc’s registration
example, where a registration screen has two states: simple registration, and
registration with help text.<span style='mso-spacerun:yes'>  </span>A simple
rule definition binds the URL to both states.</p>

<p class=ListParagraphCxSpMiddle style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l10 level1 lfo4'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>InitialStateExample.mxml – Same as the
StatesExample.mxml but with a default state.</p>

<p class=ListParagraphCxSpLast style='margin-left:.75in;mso-add-space:auto;
text-indent:-.25in;mso-list:l10 level1 lfo4'><![if !supportLists]><span
style='mso-bidi-font-family:Calibri'><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>StatesAndFormsExample.mxml – Shows how you can
map form data into the URL, specifically this example mimics a search
query.<span style='mso-spacerun:yes'>  </span>Also shows how do use
states.<span style='mso-spacerun:yes'>  </span>The URL rules branch depending
on which depending on which state is active.<span style='mso-spacerun:yes'> 
</span>This example is meant to mimic the Flexstore example, but is simpler for
illustration purposes.</p>

<h1>Miscellaneous notes</h1>

<h2>Using UrlKit in your application</h2>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>1.<span style='mso-spacerun:yes'> 
</span>For the most part, UrlKit doesn’t actually add any special HTML.<span
style='mso-spacerun:yes'>  </span>Just start declaring rules in your
application, and UrlKit will inject the necessary Javascript into the browser (for
browser communication).</p>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>2.<span style='mso-spacerun:yes'> 
</span>You must add the historyFrame.htm file to you web/application server in
the same directory as the HTML file that launches your Flex application.<span
style='mso-spacerun:yes'>  </span>UrlKit creates an HTML IFRAME behind the
scenes to maintain browser history.<span style='mso-spacerun:yes'>  </span>It
navigates the IFRAME to the historyFrame.htm file on your server.</p>

<h2>Relationship to <span class=GramE>Flex’s</span> History management</h2>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>This replaces Flex’s existing
history management and you shouldn’t use the two together. </p>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>To avoid conflicts, you need to
make sure that your Flex application does <u>not</u> include the
&quot;history&quot; IFRAME element in its HTML page. </p>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>Since the default Flex Builder
template includes this element, if you're using Flex Builder make sure to
delete the following line from your html-templates/index.template.html file:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:teal;background:white;mso-highlight:white'>&lt;</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#3F7F7F;background:white;mso-highlight:white'>iframe </span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#7F007F;background:white;mso-highlight:white'>name</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:black;background:white;mso-highlight:white'>=</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#2A00FF;background:white;mso-highlight:white'>&quot;_history&quot; </span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#7F007F;background:white;mso-highlight:white'>src</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:black;background:white;mso-highlight:white'>=</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#2A00FF;background:white;mso-highlight:white'>&quot;history.htm&quot; </span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#7F007F;background:white;mso-highlight:white'>frameborder</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:black;background:white;mso-highlight:white'>=</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#2A00FF;background:white;mso-highlight:white'>&quot;0&quot; </span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#7F007F;background:white;mso-highlight:white'>scrolling</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:black;background:white;mso-highlight:white'>=</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#2A00FF;background:white;mso-highlight:white'>&quot;no&quot; </span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#7F007F;background:white;mso-highlight:white'>width</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:black;background:white;mso-highlight:white'>=</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#2A00FF;background:white;mso-highlight:white'>&quot;22&quot; </span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#7F007F;background:white;mso-highlight:white'>height</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:black;background:white;mso-highlight:white'>=</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#2A00FF;background:white;mso-highlight:white'>&quot;0&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:teal;background:white;mso-highlight:white'>&gt;&lt;/</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#3F7F7F;background:white;mso-highlight:white'>iframe</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:teal;background:white;mso-highlight:white'>&gt;</span><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></p>

<h2>The root URL rule</h2>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>At some point in <span class=GramE>your
you</span>’re going to define a root rule, rules will branch off from
there.<span style='mso-spacerun:yes'>  </span><span class=GramE>There’s no
special requirements</span> on how to define this rule, or what it needs to
be.<span style='mso-spacerun:yes'>  </span>It can be <span class=GramE>a</span>
any of the rules in UrlKit.<span style='mso-spacerun:yes'>  </span>The one
thing you need to do is connect that root URL to the browser URL.<span
style='mso-spacerun:yes'>  </span>To do this, use the UrlBrowserManager.<span
style='mso-spacerun:yes'>  </span><span class=GramE>A</span> app only needs a
single UrlBrowserManager tag, and set the root rule by associating it with the
applicationState property of UrlBrowserManager.</p>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>How the browser integration work
behind the scenes – UrlKit uses the same techniques describe in <st1:PersonName>Kevin
 Lynch</st1:PersonName> and others <a
href="http://www.klynch.com/apps/flashlinking/howto.html">article</a> on the
subject.<span style='mso-spacerun:yes'>  </span>The UrlBrowserManager will
inject the necessary Javascript into the page.<span style='mso-spacerun:yes'> 
</span>The main thing to note is that it relies on using the hash character in
a URL to change the browser URL without navigating the browser.<span
style='mso-spacerun:yes'>  </span>Unfortunately, if you don’t like that
character, you’re out of luck <span style='font-family:Wingdings;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;mso-char-type:symbol;mso-symbol-font-family:
Wingdings'><span style='mso-char-type:symbol;mso-symbol-font-family:Wingdings'>J</span></span></p>

<h2>Browser Support</h2>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>Since UrlKit needs to integrate
with the browser and rely on Javascript, there are differences in the
implementation for the different browsers and OS’.<span
style='mso-spacerun:yes'>  </span>So far we’ve only tested UrlKit on Windows
with IE6 and Mozilla 1.5+.<span style='mso-spacerun:yes'>  </span></p>

<h2>Browser Window Title Generation</h2>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>UrlKit allows you to change the
browser title in addition to a URL when your application state changes.<span
style='mso-spacerun:yes'>  </span>Just specify the title property in your URL
rules.<span style='mso-spacerun:yes'>  </span>UrlRuleSets by default will
composite child rule titles and pass them out to the browser window.</p>

<h2>Decoupling <span class=GramE>The</span> Browser Integration from UrlRules</h2>

<p class=MsoNormal>You don't actually have to use the UrlRule classes with
UrlBrowserManager.<span style='mso-spacerun:yes'>  </span>The applicationState
property of UrlBrowserManager may point to any object implementing the
IUrlApplicationState interface (which all the UrlKit rule classes do).<o:p></o:p></p>

<h2>Initialization</h2>

<p class=MsoNormal style='margin-top:10.0pt;margin-right:0in;margin-bottom:
0in;margin-left:0in;margin-bottom:.0001pt;mso-pagination:widow-orphan lines-together;
page-break-after:avoid;mso-outline-level:2'>One of the more complicated issues
is dealing with the initial URL.<span style='mso-spacerun:yes'>  </span>When
the application starts, UrlKit reads the initial URL and passes it to the root
rule to match on children rules and if there’s a match, have those child rules
do their thing.<span style='mso-spacerun:yes'>  </span>What makes this
complicated is the need to wait for the child <span class=GramE>rule’s</span>
and their associated UI components to be to be constructued.<span
style='mso-spacerun:yes'>  </span>If UrlKit tries to apply a rule <span
class=GramE>to</span> soon, then it may try to change a property value, which
may be bound to a UI component or something else that is still being
constructued. The end-result would be RTEs or a UI that hasn’t been setup
correctly.<span style='mso-spacerun:yes'>  </span>Because of this, UrlKit waits
for creationComplete event to be fired.<span style='mso-spacerun:yes'> 
</span>This results in potentially the end-user seeing the application UI being
“navigated” to the correct initial state.<span style='mso-spacerun:yes'> 
</span>For example, if a URL is mapped to <span class=GramE>a</span> accordion,
which maps to a child accordion, which maps to a child navigator, the end-user
may see the 1<sup>st</sup> accordion navigate, then the next one, then the tab
navigator.<span style='mso-spacerun:yes'>  </span>While this isn’t desirable,
it was unavoidable.</p>

</div>

</body>

</html>
